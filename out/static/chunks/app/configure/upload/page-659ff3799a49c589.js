(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[712],{334:function(e,t,r){Promise.resolve().then(r.bind(r,2328))},2328:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var a=r(7437),s=r(7204),n=r(8752),i=r(9203),l=r(3448),o=r(2883),c=r(7689),d=r(1817),m=r(3113),u=r(3065),f=r(9376),g=r(2265),x=r(7598),p=r(2381);let h=g.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,l.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});h.displayName="Input";var b=r(1229),v=r(3590),y=r(9501),j=r(7053),N=r(5060);let w=y.RV,I=g.createContext({}),S=e=>{let{...t}=e;return(0,a.jsx)(I.Provider,{value:{name:t.name},children:(0,a.jsx)(y.Qr,{...t})})},T=()=>{let e=g.useContext(I),t=g.useContext(E),{getFieldState:r,formState:a}=(0,y.Gc)(),s=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:n}=t;return{id:n,name:e.name,formItemId:"".concat(n,"-form-item"),formDescriptionId:"".concat(n,"-form-item-description"),formMessageId:"".concat(n,"-form-item-message"),...s}},E=g.createContext({}),A=g.forwardRef((e,t)=>{let{className:r,...s}=e,n=g.useId();return(0,a.jsx)(E.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...s})})});A.displayName="FormItem",g.forwardRef((e,t)=>{let{className:r,...s}=e,{error:n,formItemId:i}=T();return(0,a.jsx)(N._,{ref:t,className:(0,l.cn)(n&&"text-destructive",r),htmlFor:i,...s})}).displayName="FormLabel";let D=g.forwardRef((e,t)=>{let{...r}=e,{error:s,formItemId:n,formDescriptionId:i,formMessageId:l}=T();return(0,a.jsx)(j.g7,{ref:t,id:n,"aria-describedby":s?"".concat(i," ").concat(l):"".concat(i),"aria-invalid":!!s,...r})});D.displayName="FormControl",g.forwardRef((e,t)=>{let{className:r,...s}=e,{formDescriptionId:n}=T();return(0,a.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-[0.8rem] text-muted-foreground",r),...s})}).displayName="FormDescription";let P=g.forwardRef((e,t)=>{let{className:r,children:s,...n}=e,{error:i,formMessageId:o}=T(),c=i?String(null==i?void 0:i.message):s;return c?(0,a.jsx)("p",{ref:t,id:o,className:(0,l.cn)("text-[0.8rem] font-medium text-destructive",r),...n,children:c}):null});P.displayName="FormMessage";var R=r(3145);let _=b.z.object({prompt:b.z.string().min(7,{message:"Prompt must be at least 7 characters long"})}),C=(e,t)=>{let r=e.split(","),a=r[0].match(/:(.*?);/),s=a?a[1]:"";if(!s)return console.error("Invalid data URL: No valid MIME type found."),null;let n=atob(r[1]),i=n.length,l=new Uint8Array(i);for(;i--;)l[i]=n.charCodeAt(i);return new File([l],t,{type:s})};var O=()=>{let{toast:e}=(0,n.pm)(),[t,r]=(0,g.useState)(!1),[b,j]=(0,g.useState)(0),[N,I]=(0,g.useTransition)(),[T,E]=(0,g.useState)(null),[O,F]=(0,g.useState)(!1),[U,k]=(0,g.useState)(!1),G=(0,f.useRouter)(),[Z,M]=(0,g.useState)(!0),{startUpload:z,isUploading:J}=(0,i.n)("imageUploader",{onClientUploadComplete:e=>{let[t]=e,r=t.serverData.configId;I(()=>{G.push("/configure/design?id=".concat(r))})},onUploadProgress(e){j(e)}}),V=(0,y.cI)({resolver:(0,v.F)(_),defaultValues:{prompt:""}});async function L(t){F(!0);try{let r=await fetch("/api/image",{method:"POST",body:JSON.stringify(t)}),a=await r.json(),s=new Image;s.crossOrigin="anonymous",s.src=a.url,s.onload=()=>{let t=document.createElement("canvas");t.width=s.width,t.height=s.height;let r=t.getContext("2d");if(!r){console.error("Failed to get 2D context"),e({title:"Error",description:"Unable to create 2D context for canvas.",variant:"destructive"});return}r.drawImage(s,0,0);let a=t.toDataURL("image/png");E(a)}}catch(t){console.error("Error generating image:",t),e({title:"Error",description:"Failed to generate image. Please try again.",variant:"destructive"})}finally{F(!1)}}return(0,a.jsxs)("div",{className:"flex flex-col w-full min-h-screen bg-white",children:[(0,a.jsx)("div",{className:"p-6 flex justify-center items-center bg-white shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4 bg-gray-200 p-2 rounded-full",children:[(0,a.jsxs)("button",{onClick:()=>M(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-full transition-all ".concat(Z?"bg-orange-400 text-white":"text-gray-600"),children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"AI Image"})]}),(0,a.jsxs)("button",{onClick:()=>M(!1),className:"flex items-center space-x-2 px-4 py-2 rounded-full transition-all ".concat(Z?"text-gray-600":"bg-orange-400 text-white"),children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Upload Image"})]})]})}),(0,a.jsx)("div",{className:"flex-1 transition-all duration-300 ease-in-out p-6 md:p-12",children:Z?(0,a.jsxs)("div",{id:"ai-image",className:"w-full h-full flex flex-col items-center justify-center max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"w-full px-4 mb-8",children:[(0,a.jsx)("h2",{className:"font-bold text-3xl text-gray-800 mb-4",children:"Generate Imaginative Images"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg mb-6",children:"Enter your creative prompt below to generate any imaginative image!"}),(0,a.jsx)(w,{...V,children:(0,a.jsxs)("form",{onSubmit:V.handleSubmit(L),className:"w-full flex flex-col gap-4",children:[(0,a.jsx)(S,{control:V.control,name:"prompt",render:e=>{let{field:t}=e;return(0,a.jsxs)(A,{children:[(0,a.jsx)(D,{children:(0,a.jsx)(h,{placeholder:"e.g., a kitten sitting on a park bench",className:"w-full text-base p-4 rounded-lg border-2 border-gray-300 focus:border-orange-400 transition-all",...t})}),(0,a.jsx)(P,{})]})}}),(0,a.jsxs)(p.z,{className:"bg-orange-400 text-white font-medium text-lg hover:bg-orange-500 transition-all w-full py-6 rounded-lg",type:"submit",disabled:O,children:[O?(0,a.jsx)(d.Z,{className:"animate-spin mr-2"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 mr-2"}),O?"Generating...":"Generate"]})]})})]}),(0,a.jsx)("div",{className:"relative rounded-xl bg-gray-100 p-4 ring-2 ring-dashed ring-gray-300 shadow-lg text-gray-900 text-sm w-full aspect-video flex justify-center items-center mb-8",children:O?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(d.Z,{className:"animate-spin h-24 w-24 text-orange-400 mb-8"}),(0,a.jsx)("p",{className:"text-center text-gray-500 text-lg",children:"Generating image..."})]}):T?(0,a.jsx)(R.default,{className:"w-full h-full object-contain rounded-lg",src:T,alt:"output",width:500,height:500}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)(m.Z,{className:"h-24 w-24 text-gray-400 mb-8"}),(0,a.jsx)("p",{className:"text-center text-gray-500 text-lg",children:"Your generated image will appear here"})]})}),(0,a.jsx)("div",{className:"w-full px-4",children:(0,a.jsxs)(p.z,{className:"bg-orange-400 text-white font-medium text-lg hover:bg-orange-500 transition-all w-full py-6 rounded-lg",type:"button",disabled:O||!T||U,onClick:()=>{if(T){k(!0);let t=C(T,"generated-image.png");t?z([t],{configId:void 0}):(e({title:"Invalid Image",description:"The generated image could not be converted to a file.",variant:"destructive"}),k(!1))}else e({title:"No Image to Upload",description:"Please generate an image first before uploading.",variant:"destructive"})},children:[U?(0,a.jsx)(d.Z,{className:"animate-spin mr-2"}):(0,a.jsx)(c.Z,{className:"w-5 h-5 mr-2"}),U?"Uploading...":"Upload this Image"]})})]}):(0,a.jsx)("div",{id:"upload-image",className:(0,l.cn)("w-full h-full rounded-xl bg-gray-100 p-8 ring-2 ring-dashed ring-gray-300 shadow-lg flex justify-center items-center",{"ring-orange-400 bg-orange-50":t}),children:(0,a.jsx)(x.ZP,{onDropRejected:t=>{let[a]=t;r(!1),e({title:"".concat(a.file.type," type is not supported."),description:"Please choose a PNG, JPG, or JPEG image instead.",variant:"destructive"})},onDropAccepted:e=>{z(e,{configId:void 0}),r(!1)},accept:{"image/png":[".png"],"image/jpeg":[".jpeg"],"image/jpg":[".jpg"]},onDragEnter:()=>r(!0),onDragLeave:()=>r(!1),children:e=>{let{getRootProps:r,getInputProps:n}=e;return(0,a.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center p-8",...r(),children:[(0,a.jsx)("input",{...n()}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-700 mb-4",children:"Upload your image here"}),t?(0,a.jsx)(u.Z,{className:"h-24 w-24 text-orange-400 mb-8"}):J||N?(0,a.jsx)(d.Z,{className:"animate-spin h-24 w-24 text-orange-400 mb-8"}):(0,a.jsx)(c.Z,{className:"h-24 w-24 text-gray-400 mb-8"}),(0,a.jsx)("div",{className:"flex flex-col justify-center mb-8 text-lg text-gray-700 text-center",children:J?(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("p",{className:"mb-4 font-medium",children:"Uploading..."}),(0,a.jsx)(s.Progress,{value:b,className:"w-64 h-2 bg-gray-200"})]}):N?(0,a.jsx)("div",{className:"flex flex-col items-center",children:(0,a.jsx)("p",{className:"font-medium",children:"Redirecting, please wait..."})}):t?(0,a.jsx)("p",{className:"font-medium",children:"Drop file to upload"}):(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]})}),N?null:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"PNG, JPG, JPEG"})]})}})})})]})}},2381:function(e,t,r){"use strict";r.d(t,{d:function(){return o},z:function(){return c}});var a=r(7437),s=r(2265),n=r(7053),i=r(7712),l=r(3448);let o=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,a.jsx)(m,{className:(0,l.cn)(o({variant:s,size:i,className:r})),ref:t,...d})});c.displayName="Button"},5060:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(7437),s=r(2265),n=r(6394),i=r(7712),l=r(3448);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,l.cn)(o(),r),...s})});c.displayName=n.f.displayName},7204:function(e,t,r){"use strict";r.d(t,{Progress:function(){return l}});var a=r(7437),s=r(2265),n=r(610),i=r(3448);let l=s.forwardRef((e,t)=>{let{className:r,value:s,...l}=e;return(0,a.jsx)(n.fC,{ref:t,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",r),...l,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});l.displayName=n.fC.displayName},8752:function(e,t,r){"use strict";r.d(t,{pm:function(){return u}});var a=r(2265);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],c={toasts:[]};function d(e){c=l(c,e),o.forEach(e=>{e(c)})}function m(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=a.useState(c);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9203:function(e,t,r){"use strict";r.d(t,{n:function(){return a}});let{useUploadThing:a,uploadFiles:s}=(0,r(6030).g)()},3448:function(e,t,r){"use strict";r.d(t,{T:function(){return i},cn:function(){return n}});var a=r(1994),s=r(3335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}let i=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"INR"}).format(e)}},function(e){e.O(0,[137,341,56,145,838,971,117,744],function(){return e(e.s=334)}),_N_E=e.O()}]);